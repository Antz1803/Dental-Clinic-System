@model IEnumerable<DCAS.Models.Payment>
@{
    ViewData["Title"] = "Paid Payments";
}

<style>
    /* New/Updated Color Palette & Typography */
    :root {
        --primary-color: #6c757d; /* Soft Grey/Primary action color */
        --secondary-color: #f1f1f1; /* Light background for card header */
        --accent-color: #495057; /* Darker text for card header */
        --success-color: #28a745; /* Green for Paid status */
        --view-button-color: #007bff; /* Blue for 'View' button */
    }

    .card {
        border: none; /* Remove default border for a cleaner look */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* Soft shadow */
    }

    .card-header {
        /* A more subtle header that spans the width */
        max-width: none;
        width: 100%;
        padding: 15px 25px;
        background-color: var(--secondary-color);
        margin: 0; /* Remove negative margin */
        border-bottom: 1px solid #dee2e6;
    }

        .card-header h2 {
            margin: 0;
            color: var(--accent-color); /* Darker, more professional text */
            font-weight: 600;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }

        .card-header i {
            margin-right: 10px;
        }

    /* Status Badge Styling */
    .badge-paid {
        background-color: var(--success-color);
        color: white;
        padding: 6px 12px;
        border-radius: 20px; /* Pill-shaped badge */
        font-weight: 500;
        font-size: 0.85em;
        display: inline-flex;
        align-items: center;
    }

        .badge-paid i {
            margin-right: 5px;
        }

    /* Table Enhancements */
    .table-hover tbody tr:hover {
        background-color: #e9ecef; /* Lighter, clearer hover effect */
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: rgba(0, 0, 0, 0.02); /* Subtle zebra striping */
    }

    .table th, .table td {
        vertical-align: middle;
    }

    /* Button Styling */
    .btn-view {
        background-color: var(--view-button-color); /* Primary blue */
        color: white;
        border: 1px solid var(--view-button-color);
        transition: all 0.2s ease-in-out;
    }

        .btn-view:hover {
            background-color: #0056b3; /* Darker blue on hover */
            color: white;
            border-color: #0056b3;
        }

    .btn-outline-secondary {
        color: var(--primary-color);
        border-color: var(--primary-color);
    }

        .btn-outline-secondary:hover {
            background-color: var(--primary-color);
            color: white;
        }

    /* Footer Totals */
    .summary-box {
        background-color: var(--secondary-color);
        padding: 15px;
        border-radius: 5px;
        border: 1px solid #dee2e6;
    }

</style>

<div class="card">
    <div class="card-header">
        <h2 class="mb-0">
            <i class="fas fa-check-circle"></i> Paid Payments
        </h2>
    </div>
    <div class="p-4 p-md-5">
        @* Use Bootstrap padding utility for responsiveness *@
        <div class="mb-4">
            <a asp-action="Index" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left"></i> Back to Unpaid Payments
            </a>
        </div>

        @if (Model != null && Model.Any())
        {
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    @* Removed table-bordered for a lighter look *@
                    <thead class="table-light">
                        <tr>
                            <th>ID</th> @* Abbreviated for space *@
                            <th>Patient</th>
                            <th>Doctor</th>
                            <th>Service</th>
                            <th>Method</th> @* Abbreviated for space *@
                            <th class="text-nowrap">Payment Date</th>
                            <th class="text-end">Amount</th>
                            <th class="text-end">Cash</th>
                            <th class="text-end">Change</th>
                            <th class="text-center">Status</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var payment in Model)
                        {
                            <tr>
                                <td>@payment.PaymentId</td>
                                <td>@payment.Person?.Name</td>
                                <td>@payment.DoctorName</td>
                                <td>@payment.Service?.MedicalNameService</td>
                                <td>@payment.PaymentMethod</td>
                                <td class="text-nowrap">@payment.PaymentDate.ToString("MMM dd, yyyy")</td>
                                <td class="text-end fw-bold">₱@payment.AmountPaid.ToString("N2")</td> @* Bold the total amount *@
                                <td class="text-end">₱@payment.Cash.ToString("N2")</td>
                                <td class="text-end">₱@payment.AmountChanged.ToString("N2")</td>
                                <td class="text-center">
                                    <span class="badge-paid">
                                        <i class="fas fa-check"></i> @payment.Status
                                    </span>
                                </td>
                                <td class="text-center">
                                    <a asp-action="Details" asp-route-id="@payment.PaymentId" class="btn btn-view btn-sm">
                                        <i class="fas fa-eye"></i> View
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="row justify-content-end mt-4">
                <div class="col-lg-5 col-md-6">
                    <div class="summary-box">
                        <h5 class="text-dark mb-3">Revenue Summary</h5>
                        <div class="d-flex justify-content-between">
                            <span class="text-muted">Total Paid Payments:</span>
                            <strong class="text-dark">@Model.Count()</strong>
                        </div>
                        <hr class="my-2" />
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-dark fs-5">Total Revenue:</span>
                            <strong class="text-success fs-5">₱@Model.Sum(p => p.AmountPaid).ToString("N2")</strong>
                        </div>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div class="alert alert-info border-0 shadow-sm" role="alert">
                <h4 class="alert-heading"><i class="fas fa-info-circle"></i> No Paid Payments</h4>
                <p>It looks like there are no paid payments recorded yet.</p>
                <hr>
                <a asp-action="Index" class="alert-link">Go to Unpaid Payments.</a>
            </div>
        }
    </div>
</div>